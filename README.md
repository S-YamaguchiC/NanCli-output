# なんちゃってClicker（?）

## 使ったもの
IntelliJ IDEA  
OS -> Windows10  
vue -> 2.6.10  
vue/cli -> 3.6.3  
node -> v10.15.0  
npm -> 6.4.1  

## つくるもの（簡単な要件みたいなもの）
- アンケート？に使うSPA
- 選択肢ボタンが4つある
- アンケートの「○○をA~Dで答えて」みたいな文はいらない
- ユーザ認証もいらない
- 集計結果がわかるチャート（円でも棒でも線でも可）
- 

## かかった時間（あまり参考にならない）
ずばりフロント（値の保持とかしない、チャートが動くだけ）だけで7時間くらい。  
いけるっしょ～的なかる～い感じでネットの情報をあさりながらやってみたけど不具合が起きておじゃん。  
そのあとに公式ドキュメント見ながら書き直したらなんと40分くらい。。。ぐえ  
サーバー側（投票の値保持と取り出しの処理など）をまだやってないので、そっちは追々書きます。

## 用意
(Vuejsのプロジェクトは作成されている前提です, webpackは使ってません)  
...  

#### 1. vue-chartjsのインストール
VueでPieChartを使うためには、まず``vue-chartjs``を入れる必要があります  
そこで、まずは以下のコマンドでプロジェクト内にvue-chartjsをインスコします
```
$ cd {プロジェクトのパス}
$ npm install vue-chartjs chart.js --save
```

#### 2. コンポーネントの作成
プロジェクト内に``components``っていうディレクトリがあると思うので、  
ディレクトリ中に``PieChart.js``を作成します(本当は他のディレクトリに移したいけどパス周りがめんどいので)  
この中に今回使う円グラフを描画するためのスクリプトを記述していきます  

1. 公式のソースをコピペ  
    基本的にこのREADME.mdの下の方にあるvue-chartjsの公式からコードを引っ張ってきて、改造します。  
    今回は、公式の``UpdatingCharts / Example``にある``LineChart.js``と``RandomChart.vue``を持ってきました。  

2. チャートが表示できるか試す  
    とりあえず、``LineChart.js``の内容をプロジェクト内の``PieChart.js``にコピペ、  
    ``RandomChart.vue``の内容を``App.vueに呼び出されている子コンポーネント(このプロジェクトの場合はHomePage.vueにあたる)``にコピペします  

3. うごかしてみます
    ```
    $ npm run serve
    ```
    ここで動かない場合はもう一回コード見直してください（まるなげ）  
        1. ちゃんとimportしてる？  
        2. そもそもvue-chartjsとかいれてますよね  
    
#### 3. コードの解説など    
改造しましょうね～～  
たいしたことないです。ちょっと呼び出す関数を変えたりするだけです。
    
まずもとのサンプルコードの解説っぽいのですが、  
このサンプルは、Randomizeボタンを押すとbuttonタグの@clickで``fillData()``を呼び出し、  
その関数内にある``datacollection``の``data (チャートに表示する値)``を``getRandomize()``によって乱数化して、  
さらにその値が更新されるごとにチャートを再描画しています。（多分そういうことだと思っている）

つぎに要件を満たすにはどうしたら良いかって言うと、  
ラジオボタンをつくって(べつにラジオじゃなくても良いんだけどね)``fillData()``を呼び出す前にどのラジオボタンを押されたか判定する必要があるのと、  
``getRandomize()``の部分を乱数じゃなくて投票をされた回数にするべきだとわかるでしょう。  

ここで変更した箇所をざっくり書き出すと、  
1. HomePage.vue
    - ``data()``に押された回数をカウントする変数の宣言と初期化
    - それに伴って、``fillData()``内の``labes``,``data``の中身を対応したものに変更
    - ラジオボタンの追加(4こ)
    - 新規で``addData()``関数を作成し、ラジオボタンの判定を取得・カウントのインクリメントを可能に
        - ``addData()``を作ったので、ラジオボタンの@clickは``addData()``に設定        
2. PieChart.js
    - チャートの形を、``Line``から``Doughnut（どーなっつ）``に変更
        - （クラス名がPieなのにDoughnutを使っていることにはふれないでほしい）

こんなもんです。チャートの形に関してはいっぱいあるので公式をよんでください

#### 4. おわり
何を書こうか決めていない    


##### !!! わからん現象リスト !!!
- いまのところなし
  
#### Reference
[vue-chartjs Getting Started](https://vue-chartjs.org/guide/#npm)

### UPDATE